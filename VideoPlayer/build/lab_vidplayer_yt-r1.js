// lab_vidplayer_yt-r1.js - https://github.com/labatrockwell/Interactive-Spaces-Toolkit
(function(){var a=namespace("com.rockwellgroup.lab.toolkit");a.Controller.YouTubeController=function(c,b){a.Controller.BaseVideoController.call(this,c,b)};a.Controller.YouTubeController.prototype=a.Util.inherit(a.Controller.BaseVideoController.prototype);a.Controller.YouTubeController.prototype.loadVideoById=function(a){this.target.getYouTubePlayer().loadVideoById(a,0,"highres")};a.Controller.YouTubeController.prototype.loadPlaylist=function(a){console.log(LOG_NARRATE,"[YouTubeController] Loading up playlist",
a);this.target.getYouTubePlayer().loadPlaylist(a,0,0,"highres")};a.Controller.YouTubeController.prototype.setVolume=function(a){console.log(LOG_NARRATE,"[VOLUME]2 ",a);this.target.setVolume(a)};a.Controller.YouTubeController.prototype.getVolume=function(){console.log(LOG_NARRATE,"[GET VOLUME]2 ",this.target.getVolume());this.target.getVolume()};a.Controller.YouTubeController.prototype.playVideo=function(){console.log(LOG_NARRATE,"[YouTubeController] Playing Video");this.target.getYouTubePlayer().playVideo()};
a.Controller.YouTubeController.prototype.nextVideo=function(){this.target.getYouTubePlayer().nextVideo()};a.Controller.YouTubeController.prototype.previousVideo=function(){this.target.getYouTubePlayer().previousVideo()};a.Controller.YouTubeController.prototype.pauseVideo=function(){this.target.getYouTubePlayer().pauseVideo()};a.Controller.YouTubeController.prototype.stopVideo=function(){this.target.getYouTubePlayer().stopVideo()};a.Controller.YouTubeController.prototype.playOrPauseVideo=function(){1==
this.target.getYouTubePlayer().getPlayerState()?this.pauseVideo():this.playVideo()};a.Controller.YouTubeController.prototype.clearVideo=function(){this.target.getYouTubePlayer().clearVideo()}}).call(this);
(function(){var a=namespace("com.rockwellgroup.lab.toolkit");a.Model.YouTubeVideo=function(c){a.Model.BaseVideo.call(this,c)};a.Model.YouTubeVideo.prototype=a.Util.inherit(a.Model.BaseVideo.prototype);a.Model.YouTubeVideo.prototype.fetch=function(a){var b=this;console.log(LOG_NARRATE,"[SINGLE YT Video] Fetch",b);$.ajax({url:"http://gdata.youtube.com/feeds/api/videos/"+b.id+"?alt=json",dataType:"json",cache:!1,success:function(e){b.setTitle(e.entry.title.$t);b.setDescription(e.entry.content.$t);"function"===
typeof a&&a()},error:function(b){console.log(LOG_ERROR,"[YouTubeVideo] error",b);"function"===typeof a&&a()}})};a.Model.YouTubePlaylist=function(c){a.Model.BasePlaylist.call(this,c);console.log(LOG_NARRATE,"[YT Video] YouTubePlaylist",this,c)};a.Model.YouTubePlaylist.prototype=a.Util.inherit(a.Model.BasePlaylist.prototype);a.Model.YouTubePlaylist.prototype.update=function(c,b){console.log(LOG_NARRATE,"[YT Playlist] UPDATE",c);if(c){console.log(LOG_NARRATE,"[YT Playlist] Data Update");this.title=c.playlistTitle;
this.collection=[];for(var e in c.videoArray){var g=c.videoArray[e],d=new a.Model.YouTubeVideo(g.id);d.setTitle(g.title);d.setDescription(g.description);d.setCategory(g.category);d.setThumbnail(g.thumbnail||"http://img.youtube.com/vi/"+g.id+"/hqdefault.jpg");this.collection.push(d)}console.log(this);b()}};a.Model.YouTubePlaylist.prototype.initialize=function(c,b){console.log(LOG_NARRATE,"[YT Playlist] Initialize",this,b);var e=this;if(b){console.log(LOG_NARRATE,"[YT Playlist] Data Initialize");console.log("Init from Admin",
b);console.log(b.playlistTitle);console.log(b.videoArray);console.log(parseInt(b.playlistOrder));e.title=b.playlistTitle;e.description=b.playlistDescription;e.order=parseInt(b.playlistOrder);for(var g in b.videoArray){var d=b.videoArray[g],f=new a.Model.YouTubeVideo(d.id);f.setTitle(d.title);f.setDescription(d.description);f.setCategory(d.category);f.setThumbnail(d.thumbnail||"http://img.youtube.com/vi/"+d.id+"/hqdefault.jpg");e.addItem(f)}console.log(e);c()}else console.log(LOG_NARRATE,"[YT Playlist] Test Initialize"),
$.ajax({url:"./test/"+e.id+"-playlist.json",dataType:"json",cache:!1,success:function(b){e.title=b.title;e.description=b.description;e.order=b.order;for(var g in b.videos){var d=b.videos[g],f=new a.Model.YouTubeVideo(d.id);f.setTitle(d.title);f.setDescription(d.description);f.setCategory(d.category);f.setThumbnail(d.thumbnail||"http://img.youtube.com/vi/"+d.id+"/hqdefault.jpg");e.addItem(f)}c()},error:function(a){console.log(LOG_ERROR,"[YouTubePlaylist] error",a);c()}})}}).call(this);
(function(){var a=namespace("com.rockwellgroup.lab.toolkit");a.View.YouTubeTarget=function(c,b){a.View.BaseVideoPlayerTarget.call(this,c,b)};a.View.YouTubeTarget.prototype=a.Util.inherit(a.View.BaseVideoPlayerTarget.prototype);a.View.YouTubeTarget.prototype.initialize=function(c){var b=this;b.id="c"+a.View.CID++;b.$el.html($("<div/>").prop("id",this.id));b.yt_player=new YT.Player(b.id,{height:b.$el.height(),width:b.$el.width(),playerVars:{controls:0,showinfo:0,rel:0,iv_load_policy:3},events:{onReady:c,
onStateChange:function(a){var c={};if(a.target&&a.target.getVideoUrl)c.video_id=b.getVideoId(a.target.getVideoUrl()),c.screen_id=b.screen_id;-1===a.data?$(document).trigger("videoLoaded",c):0===a.data?$(document).trigger("videoEnded",c):1===a.data?$(document).trigger("videoPlaying",c):2===a.data?$(document).trigger("videoPaused",c):3===a.data?$(document).trigger("videoBuffering",c):5===a.data&&$(document).trigger("videoCued",c)}}})};a.View.YouTubeTarget.prototype.getYouTubePlayer=function(){return this.yt_player};
a.View.YouTubeTarget.prototype.getVideoId=function(c){c=a.Util.queryString(c);if(c.v)return c.v};a.View.YouTubeTarget.prototype.goFullScreen=function(){this.original_height=this.$el.height();this.original_width=this.$el.width();this.getYouTubePlayer().setSize($(window).width(),$(window).height());this.$el.addClass("full-screen")};a.View.YouTubeTarget.prototype.setVolume=function(a){console.log("[VIEW] ",a);this.getYouTubePlayer().setVolume(a)};a.View.YouTubeTarget.prototype.getVolume=function(){console.log("[VIEW] getVolume ",
this.getYouTubePlayer().getVolume());return this.getYouTubePlayer().getVolume()};a.View.YouTubeTarget.prototype.leaveFullScreen=function(){this.getYouTubePlayer().setSize(this.original_width,this.original_height);this.$el.removeClass("full-screen")}}).call(this);
