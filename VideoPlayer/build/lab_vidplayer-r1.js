// lab_vidplayer-r1.js - https://github.com/labatrockwell/Interactive-Spaces-Toolkit
function namespace(b){for(var b=b.split("."),a=window,e="",d=0,c=b.length;d<c;d++)e=b[d],a[e]=a[e]||{},a=a[e];return a}
(function(){var b=namespace("com.rockwellgroup.lab.toolkit");b.Model=b.Model||{};b.View=b.View||{CID:0};b.UI=b.UI||{};b.Controller=b.Controller||{};b.Network=b.Network||{};b.Util={inherit:function(b){function a(){}if(null!=b){if(Object.create)return Object.create(b);var c=typeof b;if("object"!==c&&"function"!==c)throw TypeError();a.prototype=b;return new a}},queryString:function(b){for(var a=[],c=b.slice(b.indexOf("?")+1).split("&"),f=0;f<c.length;f++)b=c[f].split("="),a.push(b[0]),a[b[0]]=b[1];return a},
loadScript:function(b,a){var c;c=document.createElement("script");c.onload=function(){if("function"===typeof a)return a()};c.src=b;return document.getElementsByTagName("head")[0].appendChild(c)}};var a=b.log;b.log=function(){var e=b.Util.queryString(window.location.search).debug||1,d=Array.prototype.slice.call(arguments);"number"==typeof d[0]?e&&d[0]<=e&&(d=d.slice(1,d.length),a.apply(this,d)):a.apply(this,d)}}).call(this);var LOG_ERROR=1,LOG_INFO=2,LOG_EVENTS=3,LOG_NARRATE=4,LOG_ALL=5;
(function(){var b=namespace("com.rockwellgroup.lab.toolkit"),a=namespace("com.rockwellgroup.lab.toolkit.Controller");b.Controller.BaseVideoController=function(b,a){this.playlist=b;this.target=a};a.BaseVideoController.prototype.initialize=function(b){var a=this;$(document).bind("videoPlaying",function(b,e){try{a.playlist.setItemIndex(e.video_id);var g=a.playlist.getItemActive();$(document).trigger("videoTitleChanged",g.title);$(document).trigger("videoDescriptionChanged",g.description);a.playlist.getItemIndex()==
a.playlist.getItemIndexLast()&&(console.log(LOG_NARRATE,"[BaseVideo] Playlist ends after this one",e),$(document).bind("videoEnded",function(){a.clearVideo();if("function"==typeof a.onPlaylistEnd)a.onPlaylistEnd(),a.onPlaylistEnd=null}))}catch(h){}});$(document).bind("videoEnded",function(){if("function"===typeof a.onVideoEnd)a.clearVideo(),a.onVideoEnd(),a.onVideoEnd=null});$(document).bind("videoLoaded",function(){$(document).trigger("videoTitleChanged","");$(document).trigger("videoDescriptionChanged",
"")});"function"===typeof b&&b()};b.Controller.BaseVideoController.prototype.setVolume=function(a){console.log("[CONTROLLER]2 ",a,50);this.target.setVolume(a)};b.Controller.BaseVideoController.prototype.getVolume=function(){this.target.getVolume()};b.Controller.BaseVideoController.prototype.goFullScreen=function(){this.target.goFullScreen()};b.Controller.BaseVideoController.prototype.leaveFullScreen=function(){this.target.leaveFullScreen()};b.Controller.BaseVideoController.prototype.loadFirstVideo=
function(a){var b=this.playlist.getItemFirst();console.log(LOG_NARRATE,"[BaseVideoController] Loading first video",b);this.loadSingleVideo(b.id,a)};b.Controller.BaseVideoController.prototype.loadSingleVideo=function(a,b){console.log(LOG_NARRATE,"[BaseVideoController] Play a single video and stop",a);this.onVideoEnd=b;this.onPlaylistEnd=null;this.loadVideoById(a)};b.Controller.BaseVideoController.prototype.loadAllVideos=function(a){console.log(LOG_NARRATE,"[BaseVideoController] Play all videos and stop",
this.playlist.getIdList());this.onPlaylistEnd=a;this.onVideoEnd=null;this.loadPlaylist(this.playlist.getIdList())};b.Controller.BaseVideoController.prototype.loadVideoById=function(){};b.Controller.BaseVideoController.prototype.loadPlaylist=function(){};b.Controller.BaseVideoController.prototype.playVideo=function(){};b.Controller.BaseVideoController.prototype.pauseVideo=function(){};b.Controller.BaseVideoController.prototype.stopVideo=function(){};b.Controller.BaseVideoController.prototype.playOrPauseVideo=
function(){};b.Controller.BaseVideoController.prototype.nextVideo=function(){};b.Controller.BaseVideoController.prototype.previousVideo=function(){};b.Controller.BaseVideoController.prototype.clearVideo=function(){}}).call(this);
(function(){var b=namespace("com.rockwellgroup.lab.toolkit");b.Model.BaseVideo=function(a){this.description=this.title="";this.id=a;this.thumbnail=this.category=""};b.Model.BaseVideo.prototype.initialize=function(a){"function"===typeof a&&a()};b.Model.BaseVideo.prototype.setTitle=function(a){if(a)this.title=a};b.Model.BaseVideo.prototype.setDescription=function(a){if(a)this.description=a};b.Model.BaseVideo.prototype.setCategory=function(a){if(a)this.category=a};b.Model.BaseVideo.prototype.setThumbnail=
function(a){if(a)this.thumbnail=a};b.Model.BasePlaylist=function(a){this.id=a;this.description=this.title="";this.order=0;this.collection=[];this.index=0};b.Model.BasePlaylist.prototype={initialize:function(a){a()},addItem:function(a){console.log(LOG_INFO,"[Playlist] + ",a);this.collection.push(a)},setItemIndex:function(a){if(a){for(var b in this.collection)if(this.collection[b].id===a)this.index=b;console.log(LOG_NARRATE,"[Playlist] Updated active video to ",a,this.index,this.getItemActive())}else console.log(LOG_ERROR,
"[Playlist] Video is invalid",a)},getItemIndex:function(){return this.index},getItemIndexLast:function(){return this.collection.length-1},getItemAt:function(a){return this.collection[a]},getItemActive:function(){return this.getItemAt(this.index)},getItemFirst:function(){return this.getItemAt(0)},getNumItems:function(){return this.collection.length},getIdList:function(){var a=[],b;for(b in this.collection)a.push(this.collection[b].id);return a}}}).call(this);
(function(){var b=namespace("com.rockwellgroup.lab.toolkit");b.View.BaseVideoPlayerTarget=function(a,b){this.screen_id=a;this.$el=b};b.View.BaseVideoPlayerTarget.prototype.initialize=function(a){"function"===typeof a&&a()}}).call(this);
